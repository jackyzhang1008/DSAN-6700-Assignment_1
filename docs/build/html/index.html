<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DSAN-6700-Assignment_1 &#8212; dsan-6700-assignment-1  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="src" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dsan-6700-assignment-1">
<h1>DSAN-6700-Assignment_1<a class="headerlink" href="#dsan-6700-assignment-1" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">src</a><ul>
<li class="toctree-l2"><a class="reference internal" href="email_system.html">email_system package</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="project-directory-structure">
<h1>Project Directory Structure<a class="headerlink" href="#project-directory-structure" title="Link to this heading">¶</a></h1>
<p>Below is the project directory structure:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>├── Makefile                      # File to automate tasks like building, testing, etc.
├── README.md                     # Unified README for the entire project
├── build/                        # Directory for build artifacts (compiled files, etc.)
├── docs/                         # Documentation directory
│   ├── Makefile                  # Makefile for building the Sphinx documentation
│   ├── build/                    # Generated documentation files
│   │   ├── _sources/             # Documentation source files in RST format
│   │   ├── _static/              # Static files (CSS, JavaScript, images, etc.)
│   │   ├── doctrees/             # Intermediate files used by Sphinx
│   │   ├── genindex.html         # Generated index page for the documentation
│   │   ├── html/                 # Directory for HTML files
│   │   └── searchindex.js        # Search index for the documentation
│   ├── make.bat                  # Windows batch file for building the documentation
│   └── source/                   # Source directory for the documentation
│       ├── conf.py               # Sphinx configuration file
│       ├── index.rst             # Main documentation file (in reStructuredText format)
│       └── modules.rst           # Documentation for project modules
├── environment.yml               # Conda environment file for project dependencies
├── make.bat                      # Windows batch file for automated tasks
├── oryx-build-commands.txt       # Oryx build commands for deployment
├── poetry.lock                   # Locked dependency versions (generated by Poetry)
├── problem4/                     # Directory for Problem 4 (ML model training &amp; inference)
│   ├── README.md                 # README for Problem 4
│   ├── build/                    # Build artifacts for the ML system
│   ├── iris_clusters.png         # Visual output of ML clustering
│   ├── iris_data.json            # JSON dataset for the ML model
│   ├── knn_model.pkl             # Trained KNN model pickle file
│   ├── ml_app/                   # Module for the ML application
│   │   ├── __init__.py           # Initialization file for the ML app module
│   │   ├── __main__.py           # Entry point for running the ML app
│   │   ├── __pycache__/          # Compiled Python files
│   │   ├── inference.py          # Inference logic for the ML model
│   │   ├── knn_model.pkl         # Trained KNN model used in inference
│   │   ├── tests/                # Unit tests for the ML app
│   │   │   ├── test_ml.py        # Unit tests for ML functionality
│   │   └── train.py              # Script for training the ML model
│   ├── out.json                  # Output file for model predictions
│   ├── public/                   # Directory for public-facing assets (e.g., HTML files)
│   │   └── index.html            # Public HTML file for viewing the ML model&#39;s output
│   └── visualize.py              # Script for visualizing the ML results
├── pyproject.toml                # Poetry configuration file for dependencies and project metadata
├── source/                       # Source files for documentation
│   ├── _static/                  # Static files (CSS, JavaScript, images) for documentation
│   ├── _templates/               # HTML templates for documentation
│   ├── conf.py                   # Sphinx configuration file for documentation
│   └── index.rst                 # Main documentation file for Sphinx
└── src/                          # Source code directory for both Problem 3 and Problem 4
    └── email_system/             # Module for Problem 3 (Email alert system)
        ├── alert.py              # Alert system logic
        └── mailer.py             # Email logic implementation
</pre></div>
</div>
</section>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h1>
<ol class="arabic simple">
<li><p><strong>Email Alert System</strong>:</p></li>
</ol>
<p>This project provides an email alert system using a Python package that sends email notifications to users. The project is built with modern Python packaging techniques using <cite>Poetry</cite> and leverages <cite>GitHub Actions</cite> for Continuous Integration (CI). The email alert functionality is implemented through two Python scripts: <cite>alert.py</cite> and <cite>mailer.py</cite> under the directory <cite>src/</cite>. The <cite>alert.py</cite> script is responsible for sending email alerts, while the <cite>mailer.py</cite> script defines the email logic. The project also includes a pre-commit hook using <cite>Ruff</cite> to ensure that code is formatted correctly and adheres to best practices before it’s committed.</p>
<ol class="arabic simple" start="2">
<li><p><strong>ML Model System</strong>:</p></li>
</ol>
<p>The ML Model System focuses on training, performing inference, and visualizing a machine learning model on the Iris dataset using a K-Nearest Neighbors (KNN) classifier. The system includes scripts for each stage of the workflow: training the model, running inference on new data, and visualizing the results using UMAP for dimensionality reduction.</p>
<p>Features</p>
<ol class="arabic simple">
<li><p><strong>Email Alert System</strong>:</p></li>
</ol>
<ul class="simple">
<li><p>Send email alerts via a local SMTP server.</p></li>
<li><p>Structured as a Python package using <cite>Poetry</cite>.</p></li>
<li><p>Automatic formatting and linting using <cite>pre-commit</cite> hooks.</p></li>
<li><p>Continuous Integration (CI) pipeline with <cite>GitHub Actions</cite>.</p></li>
</ul>
<ol class="arabic" start="2">
<li><p><strong>ML Model System</strong>:</p>
<p><strong>Model Training</strong>:</p>
<ul class="simple">
<li><p>The <cite>train.py</cite> script trains a KNN model on the Iris dataset using a specified train-test split ratio (default is 50%).</p></li>
<li><p>After training, the model is evaluated for accuracy, and the trained model is saved to a file (<cite>knn_model.pkl</cite>) for later use during inference.</p></li>
<li><p>The Iris dataset is split into training and test sets, and accuracy is computed based on the test set.</p></li>
</ul>
<p><strong>Inference</strong>:</p>
<ul class="simple">
<li><p>The <cite>inference.py</cite> script loads the saved KNN model (<cite>knn_model.pkl</cite>) and performs inference on new data provided via an environment variable (<cite>DATA</cite>).</p></li>
<li><p>The input data must be in JSON format, and the output predictions (including the input features and predicted labels) are saved to a file (<cite>out.json</cite>).</p></li>
</ul>
<p><strong>Visualization</strong>:</p>
<ul class="simple">
<li><p>The <cite>visualize.py</cite> script reduces the dimensionality of the Iris dataset using UMAP (Uniform Manifold Approximation and Projection) to generate 2D projections from the original 4D feature space.</p></li>
<li><p>The resulting visualization is created using Plotly and saved as both an interactive HTML file (<cite>public/index.html</cite>) and a static PNG image (<cite>iris_clusters.png</cite>).</p></li>
</ul>
</li>
</ol>
<section id="usage-instructions">
<h2>Usage Instructions<a class="headerlink" href="#usage-instructions" title="Link to this heading">¶</a></h2>
</section>
<section id="train-the-model">
<h2>1. Train the Model<a class="headerlink" href="#train-the-model" title="Link to this heading">¶</a></h2>
</section>
</section>
<section id="setting-up">
<h1>Setting up<a class="headerlink" href="#setting-up" title="Link to this heading">¶</a></h1>
<blockquote>
<div><p>To train the KNN model and save it for inference, run:</p>
</div></blockquote>
</section>
<section id="steps">
<h1>Steps<a class="headerlink" href="#steps" title="Link to this heading">¶</a></h1>
<p>This section walks through the implementation of the email alert system, which sends email notifications using Python. The system is built using <cite>Poetry</cite> for modern project packaging, with GitHub Actions integrated for Continuous Integration (CI).</p>
<ol class="arabic simple">
<li><p>Cloning the Repository</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/your_username/DSAN-6700-Assignment_1.git
<span class="nb">cd</span><span class="w"> </span>DSAN-6700-Assignment_1
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Setting up a virtual environment</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>dsan-6700<span class="w"> </span><span class="c1"># to create the environment</span>
conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>environment.yml<span class="w"> </span><span class="c1"># to save it into the file for others to use it</span>
conda<span class="w"> </span>activate<span class="w"> </span>dsan-6700<span class="w"> </span><span class="c1"># to activate the environment</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Install Poetry and its dependencies</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="mail-alert-system">
<h1>Mail Alert System<a class="headerlink" href="#mail-alert-system" title="Link to this heading">¶</a></h1>
<p>1. Start Local SMTP Server
This will start the local SMTP debugging server that will print the email content to the terminal instead of actually sending it</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>smtpd<span class="w"> </span>-n<span class="w"> </span>-c<span class="w"> </span>DebuggingServer<span class="w"> </span>localhost:1025
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Send an email alert</p></li>
</ol>
<p>We run the  <cite>alert.py</cite> works, make sure we run the following code to trigger an email notification</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>src/email_system/alert.py<span class="w"> </span>-s<span class="w"> </span>sender@example.com<span class="w"> </span>-r<span class="w"> </span>recipient@example.com<span class="w"> </span>-j<span class="w"> </span><span class="s2">&quot;Test Subject&quot;</span><span class="w"> </span>-b<span class="w"> </span><span class="s2">&quot;This is a test email.&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><cite>Alert.py</cite>: This script is responsible for gathering the necessary information (sender, recipient, subject, and body of the email) from the command line and passing it to the mailer.py module to actually send the email.</p></li>
<li><p><cite>Mailer.py</cite>: This script contains the logic for constructing and sending the email using the SMTP (Simple Mail Transfer Protocol) protocol. It’s a utility that can be reused by other parts of the application as well.</p></li>
</ul>
<ol class="arabic" start="3">
<li><p>Continuous Integration (CI)</p>
<p>The project uses GitHub Actions for CI to automate testing and code quality checks. The CI workflow is triggered when changes are pushed to the repository as <cite>ci.yml</cite></p>
</li>
</ol>
</section>
<section id="ml-model-systems">
<h1>ML Model Systems<a class="headerlink" href="#ml-model-systems" title="Link to this heading">¶</a></h1>
<p>The overall script follows these steps:</p>
<ol class="arabic simple">
<li><p><strong>Load the Iris dataset</strong>: It uses the built-in Iris dataset from <cite>sklearn.datasets</cite>.</p></li>
<li><p><strong>Apply UMAP</strong>: The <cite>UMAP</cite> algorithm is used to reduce the dimensionality of the dataset.</p></li>
<li><p><strong>Create a scatter plot</strong>: Using Plotly Express, it generates an interactive scatter plot where each point represents an observation from the Iris dataset, color-coded by species.</p></li>
<li><p><strong>Export the plot</strong>: The plot is saved as an HTML file (<cite>index.html</cite>) in the <cite>public</cite> directory, making it easy to open in a browser for interactive exploration.</p></li>
</ol>
<ol class="arabic simple">
<li><p>Set up a virtual environment and train the model using the <cite>train.py</cite> which is used to train the KNN model</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>problem4/train.py
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Then perform inference using <cite>inference.py</cite> which loads the saved KNN model and performs inference on new data on new data using the trained KNN model</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>problem4/inference.py<span class="w"> </span>--data<span class="w"> </span><span class="s2">&quot;out.json&quot;</span>
</pre></div>
</div>
<p>The inferences here will be saved as <cite>out.json</cite></p>
<ol class="arabic simple" start="3">
<li><p>Visualise <cite>visualize.py</cite> script performs UMAP dimensionality reduction and generates a 2D visualization of the Iris dataset</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>run<span class="w"> </span>python<span class="w"> </span>problem4/visualize.py
</pre></div>
</div>
<p>The result will be saved as an image (iris_clusters.png) and an interactive HTML file (index.html).</p>
<ol class="arabic simple" start="4">
<li><p>Documentation : <strong>Sphinx</strong></p></li>
</ol>
<p>We use Sphinx for generating technical documentation. The documentation can be built locally and viewed as an HTML file.</p>
<blockquote>
<div><ul class="simple">
<li><p>Install Dependencies</p></li>
</ul>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>poetry<span class="w"> </span>add<span class="w"> </span>sphinx
</pre></div>
</div>
<ul class="simple">
<li><p>Build the Documentation</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>docs
poetry<span class="w"> </span>run<span class="w"> </span>make<span class="w"> </span>html
try<span class="w"> </span>run<span class="w"> </span>make<span class="w"> </span>html
</pre></div>
</div>
<p>The documentation will be generated in the docs/build/html/ directory.</p>
<blockquote>
<div><ul>
<li><p>We use GitHub Actions for CI automation. The CI pipeline runs every time new changes are pushed to the repository.</p>
<p>We use GitHub Actions for CI automation, ensuring that the pipeline runs automatically whenever new changes are pushed to the repository. This allows us to enforce code quality, automate testing, and generate documentation. For the Email Alert System, the workflow is defined in mailer-ci.yml. The steps involve setting up an Ubuntu runner, installing Python 3.9, and using Poetry to install the project’s dependencies. It then runs ruff to check code formatting and finally builds the documentation using Sphinx.</p>
<p>For the ML Model System, the workflow is defined in ml_app-ci.yml. This workflow also sets up an Ubuntu runner and installs Python 3.9, followed by installing dependencies using Poetry. The pipeline then runs unit tests with pytest, trains the KNN model, performs inference on synthetic data, and finally builds and uploads the model artifacts. It also generates and publishes the project documentation to ReadTheDocs, ensuring that the documentation remains up to date with every new push.</p>
</li>
</ul>
</div></blockquote>
<p>readthedocs: [dsan-6700-assignment-1.readthedocs.io](<a class="reference external" href="http://dsan-6700-assignment-1.readthedocs.io/">http://dsan-6700-assignment-1.readthedocs.io/</a>)</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">dsan-6700-assignment-1</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">src</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="modules.html" title="next chapter">src</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Isfar Baset, Sheeba Moghal, Bella Shi, Jacky Zhang, Ziyan Di.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>